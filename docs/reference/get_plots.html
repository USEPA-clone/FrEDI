<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Create plots of FrEDI outputs — get_plots • FrEDI</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Create plots of FrEDI outputs — get_plots"><meta property="og:description" content="This function creates plots for the summarized FrEDI outputs. get_plots() returns a list with heatmaps for model types present in the data (GCMs and SLR scenarios) and ribbon plots, by sector."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">FrEDI</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">3.3.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create plots of FrEDI outputs</h1>
    
    <div class="hidden name"><code>get_plots.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function creates plots for the summarized FrEDI outputs. <code>get_plots()</code> returns a list with heatmaps for model types present in the data (GCMs and SLR scenarios) and ribbon plots, by sector.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_plots</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  column <span class="op">=</span> <span class="st">"annual_impacts"</span>,</span>
<span>  undiscounted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  plotTypes <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>  save <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  directory <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  groupVars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sector"</span>, <span class="st">"variant"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>data</dt>
<dd><p>Data frame of summarized outputs produced by <code><a href="run_fredi.html">run_fredi()</a></code>. Do not change column names of the <code><a href="run_fredi.html">run_fredi()</a></code> output before running <code>get_plots()</code>.</p></dd>


<dt>column</dt>
<dd><p>A character string indicating the name of the column in the data for which to create plots.</p></dd>


<dt>undiscounted</dt>
<dd><p>A <code>TRUE/FALSE</code> value indicating whether the values in column represent undiscounted values or discounted values (i.e., present values). Defaults to <code>undiscounted=TRUE</code>.</p></dd>


<dt>plotTypes</dt>
<dd><p>Character string or character vector indicating which types of plots to produce. Options are <code>c("heatmaps", "ribbon", "all")</code>. Set <code>plotTypes="all"</code> (default) to produce both types of plots.</p></dd>


<dt>save</dt>
<dd><p>A <code>TRUE/FALSE</code> value indicating whether to save results. If a directory value is supplied (i.e., <code>!is.null(directory)</code>), defaults to <code>save=TRUE</code>. Otherwise, default is <code>save=FALSE</code>.</p></dd>


<dt>directory</dt>
<dd><p>A character string indicating the location of a directory in which to save the plot objects. No default (i.e., <code>directory=NULL</code>).</p></dd>


<dt>groupVars</dt>
<dd><p>A character vector indicating columns to use for grouping. Defaults to <code>groupVars=c("sector", "variant")</code></p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p><code>get_plots()</code> returns a nested list of plots:</p>


<table class="table table"><tr><td><strong>List Index</strong></td><td><strong>Description</strong></td></tr><tr><td><code>heatmaps</code></td><td>List of heatmaps with list elements for all unique values for model types present in data (i.e., <code>"GCM"</code> for results calculated with temperature as the driver value and <code>"SLR"</code> for results calculated with GMSL as the driver value.</td></tr><tr><td><code>ribbon</code></td><td>List of lists of annual results. List of annual plots contains a list of sectors. Each sector contains a list of nested regional plots (<code>regional</code>, with all regions except national results and <code>national</code>, for national results).</td></tr></table></div>
    <div id="details">
    <h2>Details</h2>
    <p>This function creates plots for the summarized FrEDI outputs. <code>get_plots()</code> returns a list with heatmaps for model types present in the data (GCMs and SLR scenarios) and annual results for all sectors and variants. Results from FrEDI must be summed across impact types before using <code>get_plots()</code> (use <code><a href="run_fredi.html">run_fredi()</a></code> with the defaults, use <code>run_fredi(aggLevels= "impacttype")</code>, or run <code>aggregate_impacts(aggLevels="impactType")</code> on the output from <code><a href="run_fredi.html">run_fredi()</a></code>).</p>
<p>By default, <code>get_plots()</code> plots results from the <code>"annual_impacts"</code> column (or users can specify a column name in the data with <code>column</code>).</p>
<p>The argument <code>undiscounted</code> is used by <code>get_plots()</code> for plot labels and in file and directory names for saving results.</p>
<p><code>get_plots()</code> produces heatmaps (<code>plotTypes="heatmaps"</code>) for the outputs of FrEDI and/or plots the average value and range of impacts as a time series (<code>plotTypes="ribbon"</code>) for each sector-variant-region combination. Users can specify which plot types to produce by setting <code>plotTypes</code>. Set <code>plotTypes="all"</code> (default) to produce both heat maps and annual results or specify a single type (<code>plotTypes="heatmaps"</code> and <code>plotTypes="ribbon"</code>, respectively).</p>
<p>The heatmaps display the numeric values in the specified column (e.g., "annual_impacts") as a grid of colored pixels. Each row in the grid corresponds to a sector-variant combination (e.g., "Coastal Properties, No Adaptation"), while columns in the grid correspond to years. In other words, the heatmaps display the relative intensity of the impacts of a sector and variant compared to others. The colors in the heatmap are a gradient ranging from dark blue (impacts with values below zero) to dark red (impacts with values above zero), with a midpoint at zero (missing values appear as grey pixels). The scale of the gradient is determined from the underlying data, with the darkest points corresponding to the minimum and maximum values.</p>
<p>If temperature-driven (GCM sectors) and SLR-driven (SLR sectors) sectors are both present in the data, <code>get_plots()</code> will produce a separate heatmap for each. Each heatmap displays panels for each region (stacked vertically) and underlying models (organized horizontally).</p>
<p>Setting (<code>plotTypes="ribbon"</code>) plots the annual impacts as time series. For temperature-driven sectors, the model average is plotted as a line and the range of model values (minimum and maximum) are plotted as a ribbon plot. For the SLR-driven sectors, the interpolated impacts are plotted as a line. For sectors with multiple variants, impacts for individual variants are displayed in separate panels (organized horizontally).</p>
<p>If <code>save=TRUE</code> and the user supplies a path to a directory (i.e., <code>!is.null(directory)</code>), <code>get_plots()</code> will try to save results to the specified directory. Separate directories are created within the specified directory for heatmaps and ribbon plots.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Environmental Protection Agency (EPA). 2021. Technical Documentation on The Framework for Evaluating Damages and Impacts (FrEDI). Technical Report EPA 430-R-21-004, EPA, Washington, DC. Available at <a href="https://epa.gov/cira/FrEDI/" class="external-link">https://epa.gov/cira/FrEDI/</a>.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">### Create temperature binning scenario</span></span></span>
<span class="r-in"><span><span class="va">df_tempExOut</span> <span class="op">&lt;-</span> <span class="fu">get_fredi</span><span class="op">(</span>aggLevels<span class="op">=</span><span class="st">"none"</span>, pv<span class="op">=</span><span class="cn">TRUE</span>, silent<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in get_fredi(aggLevels = "none", pv = TRUE, silent = TRUE):</span> could not find function "get_fredi"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Aggregate temperature binning summary across multiple columns</span></span></span>
<span class="r-in"><span><span class="va">agg_tempExOut</span> <span class="op">&lt;-</span> <span class="va">df_tempExOut</span> <span class="op">%&gt;%</span> <span class="fu"><a href="aggregate_impacts.html">aggregate_impacts</a></span><span class="op">(</span>columns<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"annual_impacts"</span>, <span class="st">"discounted_impacts"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in ungroup(.):</span> object 'df_tempExOut' not found</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Create list of plots for aggregated results</span></span></span>
<span class="r-in"><span><span class="va">agg_plotList</span> <span class="op">&lt;-</span> <span class="va">agg_tempExOut</span> <span class="op">%&gt;%</span> <span class="fu">get_plots</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in (function (y) {    y$valueColumn &lt;- y[, column]    return(y)})(.):</span> object 'agg_tempExOut' not found</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Create list of heatmaps for regional values only:</span></span></span>
<span class="r-in"><span><span class="va">reg_plotList</span> <span class="op">&lt;-</span> <span class="va">agg_tempExOut</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">region</span><span class="op">!=</span><span class="st">"National Total"</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">get_plots</span><span class="op">(</span>plotTypes<span class="op">=</span><span class="st">"heatmaps"</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in filter(., region != "National Total"):</span> object 'agg_tempExOut' not found</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Create list of annual plots for national values only:</span></span></span>
<span class="r-in"><span><span class="va">nation_plotList</span> <span class="op">&lt;-</span> <span class="va">agg_tempExOut</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">region</span><span class="op">==</span><span class="st">"National Total"</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">get_plots</span><span class="op">(</span>plotTypes<span class="op">=</span><span class="st">"annual"</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in filter(., region == "National Total"):</span> object 'agg_tempExOut' not found</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by .</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

